<ion-view view-title="我的消息" class="indexPage messageList myInfo">
  <ion-header-bar class="head-bg">
    <button class="button button-icon icon ion-ios-arrow-left" ng-click="goBack()"></button>
    <div class="title titleStyle">
      我的消息
    </div>
    <button class="button button-clear button-positive" style="font-size: 14px;color: black;" ng-click="allRead()">
      全部已读
    </button>
  </ion-header-bar>
  <ion-content class="content-style" delegate-handle="mainScrollMessageList">
    <!-- 1.添加下拉刷新的组件 -->
    <ion-refresher
      pulling-text="下拉刷新页面数据..."
      on-refresh="doRefresh()">
    </ion-refresher>
    <ion-list>
      <ion-item class="text-center item item-icon-right" ng-class="{'urgentBackground': false}"
                ng-click="goMessageDetail(item)" ng-repeat="item in data.messageList">
        <div class="row">
          <div class="col col-60 text-left bigTitle"><span ng-if="item.status == 0"><i class="ion-star" style="color: red" ></i>&nbsp;</span>{{item.title}}</div>
          <div class="col col-40 text-right smallTime">{{item.send_time * 1000 | date:'yyyy-MM-dd HH:mm:ss'}}</div>
        </div>
        <div class="row">
          <div class="col text-left smallContent">{{item.content}}</div>
        </div>
        <i class="icon ion-ios-arrow-right"></i>
      </ion-item>
    </ion-list>
    <ion-infinite-scroll ng-if="config.nextPage" on-infinite="loadMore()" immediate-check='false' distance="1%" class="spinner"></ion-infinite-scroll>
    <div class="text-center spinnerClass" ng-show="config.nextPage">正在加载..</div>
    <div class="text-center spinnerClassSp" ng-show="!config.nextPage">暂无更多数据</div>
  </ion-content>
</ion-view>
